# M:N

## PK사용 할 때와 안할 때

<br>

![스크린샷 2023-04-14 오전 10 54 03](https://user-images.githubusercontent.com/81137234/231921517-22fb05da-9882-40a4-8fd6-735569a1581f.png)

<br>

해당 중간 테이블에 PK가 생기면  
해당 테이블도 마스터테이블로서의 기능이 생긴다.  
하자만 PK가 아닌 FK로 움직이면 관계 테이블로서의 역할만 한다.

<br>

![스크린샷 2023-04-14 오전 10 58 37](https://user-images.githubusercontent.com/81137234/231922388-30085e72-c721-43b3-8196-6bdf5e8b9bbb.png)

<br>

만약 학생과 과목이 똑같은 FK 가 들어왔다면 중복으로 데이터 삽입이 되지 않는다.

<br>

![스크린샷 2023-04-14 오전 11 00 05](https://user-images.githubusercontent.com/81137234/231922719-abd40734-aa10-4fd9-9253-17a05cf8c766.png)

<br>

하지만 PK를 가지고 있으면 한 학생이 같은 과목을 들을 수 있게된다.  
그래서 위 비즈니스 로직에서는 에러라는 것을 알 수 있다.

<br>

![스크린샷 2023-04-14 오전 11 06 02](https://user-images.githubusercontent.com/81137234/231923375-f9ba7d29-339c-4f31-afb3-81cb6b75c8f5.png)

<br>

반면에 고객과 상품의 관계에서  
고객은 상품을 가지고 있지 않다.  
고객은 상품을 살 수 있다.  
고객은 한 상품을 여러개 살 수 있다.  
이처럼 생각하면 위 비즈니스 로직에서는 맞는 구조이다.  

따라서 고객은 상품을 구매할 수 있는 관계로 볼 수 있다.

<br>

![스크린샷 2023-04-14 오전 11 15 00](https://user-images.githubusercontent.com/81137234/231924527-41e1aacd-0d29-4ffd-bc36-01a74955b6e0.png)

<br>

여러개 FK를 가지고 있고 동사 형태의 이름을 가진 테이블이 있을 것이다.  
이를 관계테이블로 볼 수 있고, 동사 형태 이름을 가지고 있지 않으면 네이밍 오류, FK/PK 설정이 잘못되어 있으면 관계 설정 오류로 볼 수 있다.

<br>

---

<br>

### 보조키 사용 모델

<br>


![스크린샷 2023-04-14 오전 11 17 41](https://user-images.githubusercontent.com/81137234/231924943-ae57a942-2cf9-4706-a4a4-5e795ee7fde7.png)

<br>

중복허용 안하는 PK/FK를 가지고 있는 컬럼이 있다.  
컬럼을 하나 만들어서 PK 역할을 하는데, PK는 1개밖에 선언이 안되니까  
후보키(대체키, 보조키, AK)를 만든다.

참고로 후보키는 NULL 허용  
대체키, 보조키는 NOT NULL  
따라서 위 경우에서는 대체키, 보조키의 명칭이 맞다.  
