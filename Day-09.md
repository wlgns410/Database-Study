# 연습문제 1 - 요구사항 분석

<br>

![스크린샷 2023-04-15 오전 10 51 32](https://user-images.githubusercontent.com/81137234/232177582-9904c08f-613f-490d-82d7-acb0dc4f0bb1.png)

<br>

요구사항이 위와 같다고 하자.

<br>

![스크린샷 2023-04-15 오전 10 58 19](https://user-images.githubusercontent.com/81137234/232177751-93a6af1b-34a4-4cbf-a810-08712f2c61c9.png)

<br>

위 처럼 내용을 추려내서, 만들어내야하는 테이블, API가 요약이 되었다.  

<br>

![스크린샷 2023-04-15 오전 11 03 30](https://user-images.githubusercontent.com/81137234/232177937-7737916f-6544-48ae-aeaa-c2aca8e188a0.png)

<br>

그럼 관계는 위처럼 될 것이다.  
도서관은 Title 이므로 빼고  
Master 테이블로 서고, 서가, 책, 고객, 도서 목록으로 하는 것이 좋을 것이다.
나머지 관계 테이블로 로그인, 조회, 대출, 예약 테이블을 만들면 정리가 끝난다.

<br>

![스크린샷 2023-04-15 오전 11 29 40](https://user-images.githubusercontent.com/81137234/232178868-b9aa0dec-27a2-4881-91e9-3e10cfd6f451.png)

<br>

서고 ID를 FK이자 PK로 가지는 테이블과  
서고 ID를 FK, 서가ID를 PK로 가지는 테이블이 있다고 치자.  

<br>

만약 서고ID가 `NOT NULL`인 API 요구사항이라고 생각해보자.

서가ID가 2일때 서고ID가 2가 안될 경우가 생겨버린다.  
이렇게 쓸때는 외래키로 쓸 필요도 없어지므로 의미없는 관계가 되어버린다.  

반면 서고 ID가 FK이자 PK이면 1-1, 2-2, 3-3 각각이 연결될 수 있으므로 엄격한 `서고-서가` 관계에서는 맞는 관계이다.  

<br>

하지만 서고ID가 `NULL`인 API 요구사항이라고 생각해보자.

서고 ID가 FK이자 PK이면 NULL이 될수가 없는 구조이다.  
서고 ID를 FK, 서가ID를 PK로 가지는 테이블은 NULL을 가질 수 있어서 위 요구사항에는 맞는 관계이다.


<br>

상속형은 요구사항이 엄격해서 에러가 날 경우가 적지만, 기본키를 계속 물고 가기때문에 지저분해진다.    
반면 독립형은 유연해서 에러가 날 수 있다는 것을 알아야한다.

<br>

![스크린샷 2023-04-15 오전 11 51 52](https://user-images.githubusercontent.com/81137234/232179588-46fc0aab-4052-4c4c-b60e-aa0493e95118.png)

<br>

상속형으로 Master 테이블을 짠다고 하면 위처럼 기본키를 다 가져가게 된다.

<br>

